# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–µ–∫–∞ –∏ –¥–∏–∑–∞–π–Ω–∞ —Å–∏—Å—Ç–µ–º—ã.

## üèóÔ∏è –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         CLI Interface                        ‚îÇ
‚îÇ                         (main.py)                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                ‚îÇ                ‚îÇ
        ‚ñº                ‚ñº                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Downloader  ‚îÇ  ‚îÇ Transcriber  ‚îÇ  ‚îÇ  Translator  ‚îÇ
‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ
‚îÇ  - yt-dlp    ‚îÇ  ‚îÇ  - Whisper   ‚îÇ  ‚îÇ  - NLLB      ‚îÇ
‚îÇ  - FFmpeg    ‚îÇ  ‚îÇ  - PyTorch   ‚îÇ  ‚îÇ  - HuggingF. ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                 ‚îÇ                  ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ Text Refiner ‚îÇ
                 ‚îÇ              ‚îÇ
                 ‚îÇ  - Ollama    ‚îÇ
                 ‚îÇ  - LLM API   ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇDocument      ‚îÇ
                 ‚îÇWriter        ‚îÇ
                 ‚îÇ              ‚îÇ
                 ‚îÇ- python-docx ‚îÇ
                 ‚îÇ- markdown    ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ  Output      ‚îÇ
                 ‚îÇ  (.docx, .md)‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì¶ –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### 1. **config.py** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```python
class Settings(BaseSettings):
    # –ü—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
    OUTPUT_DIR, TEMP_DIR, LOGS_DIR
    
    # –ú–æ–¥–µ–ª–∏
    WHISPER_MODEL_DIR, NLLB_MODEL_DIR
    
    # API –∫–ª—é—á–∏
    OPENAI_API_KEY
    
    # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
    WHISPER_DEVICE (auto-detect)
    
    # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏
    SUPPORTED_LANGUAGES: list[str] = ["ru", "en"]
```

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `pydantic-settings` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (CPU/CUDA/MPS)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `.env` —Ñ–∞–π–ª–æ–≤
- –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Apple Silicon (M1/M2)

---

### 2. **downloader.py** - –ó–∞–≥—Ä—É–∑–∫–∞ —Å YouTube

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ —Å YouTube

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `yt-dlp` - –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ
- `FFmpeg` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ MP3

**–ü—Ä–æ—Ü–µ—Å—Å:**
```
URL ‚Üí yt-dlp ‚Üí Video ‚Üí FFmpeg ‚Üí MP3 ‚Üí temp/
                ‚Üì
            Metadata (title, duration)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∞—É–¥–∏–æ (—ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞)
- –û—á–∏—Å—Ç–∫–∞ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏

---

### 3. **transcriber.py** - –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ –≤ —Ç–µ–∫—Å—Ç

**–ú–æ–¥–µ–ª–∏:** OpenAI Whisper
- Base: 74M –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –±—ã—Å—Ç—Ä–æ
- Small: 244M –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ
- Medium: 769M –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

**–ü—Ä–æ—Ü–µ—Å—Å:**
```
MP3 ‚Üí Whisper Model ‚Üí Segments
                         ‚Üì
                    [timestamp, text]
```

**–ö–ª–∞—Å—Å TranscriptionSegment:**
```python
class TranscriptionSegment:
    start: float      # –ù–∞—á–∞–ª–æ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    end: float        # –ö–æ–Ω–µ—Ü –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    text: str         # –¢–µ–∫—Å—Ç —Å–µ–≥–º–µ–Ω—Ç–∞
    speaker: str      # –°–ø–∏–∫–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö YouTube
- –ú–µ—Ç–æ–¥ `update_segments_from_text()` –¥–ª—è LLM —É–ª—É—á—à–µ–Ω–∏—è

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –Ω–∞ M1/M2 (MPS –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å Whisper)
- Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
- FP16 –¥–ª—è GPU (—ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏)
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏

---

### 4. **translator.py** - –ü–µ—Ä–µ–≤–æ–¥

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞

**–ú–æ–¥–µ–ª—å:** Meta NLLB-200
- –ú–æ–¥–µ–ª—å: `facebook/nllb-200-distilled-600M`
- 200+ —è–∑—ã–∫–æ–≤
- 600M –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (distilled –≤–µ—Ä—Å–∏—è)

**–ü—Ä–æ—Ü–µ—Å—Å:**
```
Text ‚Üí Chunking ‚Üí NLLB ‚Üí Translation
         ‚Üì
    [chunk1, chunk2, ...]
```

**Chunking —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
- –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º
- –ú–∞–∫—Å–∏–º—É–º 500 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ —á–∞–Ω–∫
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –ü—Ä–æ–ø—É—Å–∫ –ø–µ—Ä–µ–≤–æ–¥–∞ –µ—Å–ª–∏ —è–∑—ã–∫ —Å–æ–≤–ø–∞–¥–∞–µ—Ç
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ (–¥–æ 100+ —Å—Ç—Ä–∞–Ω–∏—Ü)

---

### 5. **text_refiner.py** - –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ª—É—á—à–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM

**–ú–æ–¥–µ–ª–∏:** Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–µ LLM)
- qwen2.5:3b - –±—ã—Å—Ç—Ä–∞—è, —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- llama3.2:3b - –±—ã—Å—Ç—Ä–∞—è, —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- llama3:8b - –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- mistral:7b - —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å

**–ü—Ä–æ—Ü–µ—Å—Å:**
```
Text ‚Üí Chunking ‚Üí LLM ‚Üí Refined Text
         ‚Üì
    [chunk1, chunk2, ...]
```

**–ö–ª–∞—Å—Å TextRefiner:**
```python
class TextRefiner:
    def __init__(self, model_name: str, ollama_url: str)
    def refine_text(self, text: str, context: str) -> str
    def refine_chunk(self, chunk: str, context: str) -> str
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º–∞—Ç–∏–∫–∏
- –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —á–∞–Ω–∫–∏ –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏
- –£–¥–∞–ª–µ–Ω–∏–µ —Å–ª–æ–≤-–ø–∞—Ä–∞–∑–∏—Ç–æ–≤
- –£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ–∫—Å—Ç–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ HTTP API Ollama
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å fallback –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏

---

### 6. **document_writer.py** - –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–§–æ—Ä–º–∞—Ç—ã:**
1. **DOCX** - —á–µ—Ä–µ–∑ `python-docx`
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—à—Ä–∏—Ñ—Ç—ã, —Ä–∞–∑–º–µ—Ä—ã)
   - –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–π
   - –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
   
2. **Markdown** - —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
   - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Obsidian, Notion
   - –õ–µ–≥–∫–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
   - Git-friendly

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
```markdown
# –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ

## –ü–µ—Ä–µ–≤–æ–¥
*–ú–µ—Ç–æ–¥: NLLB*

[00:15] –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...
[01:30] –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ...

## –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞
*–ú–µ—Ç–æ–¥: whisper_base*

[00:15] Original text...
[01:30] Continuation...
```

---

### 7. **utils.py** - –£—Ç–∏–ª–∏—Ç—ã

**–§—É–Ω–∫—Ü–∏–∏:**

1. `sanitize_filename()` - –û—á–∏—Å—Ç–∫–∞ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
   - –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã

2. `format_timestamp()` - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
   - MM:SS –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–∏–¥–µ–æ
   - HH:MM:SS –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö

3. `detect_language()` - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
   - –ü–æ–¥—Å—á–µ—Ç –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö/–ª–∞—Ç–∏–Ω—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
   - –ü—Ä–æ—Å—Ç–æ–π –Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥

4. `chunk_text()` - –†–∞–∑–±–∏–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞
   - –ü–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º
   - –õ–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

5. `create_whisper_prompt()` - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
   - –ò–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö YouTube
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã (800 —Å–∏–º–≤–æ–ª–æ–≤)
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

---

### 8. **logger.py** - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- DEBUG - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞
- INFO - –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- WARNING - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- ERROR - –æ—à–∏–±–∫–∏

**–í—ã–≤–æ–¥—ã:**
- –ö–æ–Ω—Å–æ–ª—å: INFO –∏ –≤—ã—à–µ
- –§–∞–π–ª: –≤—Å–µ —É—Ä–æ–≤–Ω–∏
- –§–æ—Ä–º–∞—Ç: `timestamp - module - level - message`

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –í—ã–±–æ—Ä –º–æ–¥–µ–ª–µ–π Whisper

**Whisper Base (–æ—Å–Ω–æ–≤–Ω–∞—è):**
1. –ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç—å/–∫–∞—á–µ—Å—Ç–≤–æ
2. –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ CPU
3. –£–º–µ—Ä–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ RAM (~2GB)
4. 90%+ —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ —á–∏—Å—Ç–æ–º –∞—É–¥–∏–æ

**Whisper Small:**
- –õ—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ, –º–µ–¥–ª–µ–Ω–Ω–µ–µ
- –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ RAM (~3GB)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –≤–∞–∂–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

**Whisper Medium:**
- –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –º–µ–¥–ª–µ–Ω–Ω–æ
- –¢—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ RAM (~5GB)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å LLM —É–ª—É—á—à–µ–Ω–∏–µ–º

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- Tiny: –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ —Ö—É–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ
- Large: —Ç—Ä–µ–±—É–µ—Ç –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤

---

### –í—ã–±–æ—Ä NLLB –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
1. ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (–ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å)
2. ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
3. ‚úÖ 200+ —è–∑—ã–∫–æ–≤ (—Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å)
4. ‚úÖ –•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- OpenAI API: –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ, –Ω–æ –ø–ª–∞—Ç–Ω–æ (v2.0)
- Google Translate API: –ø–ª–∞—Ç–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á
- MarianMT: –º–µ–Ω—å—à–µ —è–∑—ã–∫–æ–≤

---

### –í—ã–±–æ—Ä Ollama –¥–ª—è LLM —É–ª—É—á—à–µ–Ω–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
1. ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (–ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å)
2. ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
3. ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–µ–π
4. ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
5. ‚úÖ HTTP API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏:**
- qwen2.5:3b - –±—ã—Å—Ç—Ä–∞—è, –æ—Ç–ª–∏—á–Ω–æ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ
- llama3.2:3b - –±—ã—Å—Ç—Ä–∞—è, —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- llama3:8b - –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–µ–µ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- OpenAI API: –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ, –Ω–æ –ø–ª–∞—Ç–Ω–æ (v2.0)
- HuggingFace Transformers: —Å–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ –±–µ–∑ Ollama: —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –∫–æ–¥–∞

---

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

```
youtube-transcriber/
‚îú‚îÄ‚îÄ output/           # –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ *.docx       # –î–æ–∫—É–º–µ–Ω—Ç—ã Word
‚îÇ   ‚îú‚îÄ‚îÄ *.md         # Markdown —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ * (original).* # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ * (refined).*  # –£–ª—É—á—à–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ temp/            # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–ù–ï —É–¥–∞–ª—è—é—Ç—Å—è)
‚îÇ   ‚îú‚îÄ‚îÄ *.mp3        # –°–∫–∞—á–∞–Ω–Ω–æ–µ –∞—É–¥–∏–æ
‚îÇ   ‚îî‚îÄ‚îÄ *.json       # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ
‚îú‚îÄ‚îÄ models/          # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ whisper/     # Whisper –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ nllb/        # NLLB –º–æ–¥–µ–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ logs/            # –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ app_*.log    # –ü–æ —Ñ–∞–π–ª—É –Ω–∞ –∑–∞–ø—É—Å–∫
‚îÇ
‚îî‚îÄ‚îÄ prompts/         # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã
    ‚îî‚îÄ‚îÄ *.txt        # –§–∞–π–ª—ã —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏
```

**–†–µ—à–µ–Ω–∏–µ:** –ù–µ —É–¥–∞–ª—è—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—É–¥–∏–æ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –æ—á–∏—Å—Ç–∫—É

---

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥–µ–ª–∏ —Ç—Ä–µ–±—É—é—Ç –º–Ω–æ–≥–æ RAM

**–†–µ—à–µ–Ω–∏—è:**

1. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:**
```python
def _load_model(self):
    if self.model is None:
        self.model = whisper.load_model(...)
```

2. **Chunking –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞:**
```python
chunks = chunk_text(text, max_tokens=500)
for chunk in chunks:
    translate(chunk)  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ —á–∞—Å—Ç—è–º
```

3. **Chunking –¥–ª—è LLM —É–ª—É—á—à–µ–Ω–∏—è:**
```python
chunks = self._split_text_into_chunks(text, max_chunk_size=2000)
for chunk in chunks:
    refined_chunk = self.refine_chunk(chunk)
```

4. **–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏:**
```python
del model
torch.cuda.empty_cache()  # –î–ª—è GPU
```

5. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Apple Silicon:**
```python
# –ò—Å–ø–æ–ª—å–∑—É–µ–º CPU –≤–º–µ—Å—Ç–æ MPS –¥–ª—è Whisper
if os.uname().machine == 'arm64':
    self.WHISPER_DEVICE = "cpu"
```

---

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** Fail-fast —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

**–£—Ä–æ–≤–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
```python
if not validate_args(args):
    logger.error("...")
    sys.exit(1)
```

2. **Try-catch –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö**
```python
try:
    download_audio(url)
except Exception as e:
    logger.error(f"–û—à–∏–±–∫–∞: {e}", exc_info=True)
    sys.exit(1)
```

3. **Graceful degradation**
```python
if with_speakers:
    logger.warning("Speaker diarization –±—É–¥–µ—Ç –≤ v2.0")
    # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ speakers

# LLM —É–ª—É—á—à–µ–Ω–∏–µ —Å fallback
try:
    refined_text = refiner.refine_text(original_text)
except Exception as e:
    logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏: {e}")
    logger.warning("–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–µ–π")
    refined_text = original_text
```

---

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

```python
def _get_device(self):
    if torch.cuda.is_available():
        return "cuda"
    elif torch.backends.mps.is_available():
        return "mps"  # Apple Silicon
    return "cpu"
```

### 2. FP16 –¥–ª—è GPU

```python
transcribe_options = {
    'fp16': False if device == "cpu" else True
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- 2x –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏
- 1.5x –±—ã—Å—Ç—Ä–µ–µ
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–æ—Ç–µ—Ä—è —Ç–æ—á–Ω–æ—Å—Ç–∏

### 3. Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–µ–≥–º–µ–Ω—Ç—ã –±–∞—Ç—á–∞–º–∏
for chunk in tqdm(chunks, desc="–ü–µ—Ä–µ–≤–æ–¥"):
    translate_batch(chunk)

# LLM —É–ª—É—á—à–µ–Ω–∏–µ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
for chunk in tqdm(chunks, desc="–£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞"):
    refined_chunk = refiner.refine_chunk(chunk)
```

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Apple Silicon

```python
# –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
if os.uname().machine == 'arm64':
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º CPU –¥–ª—è Whisper (MPS –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã)
    WHISPER_DEVICE = "cpu"
    # Ollama –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Neural Engine
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

### –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

‚úÖ **–ß—Ç–æ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
- –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã
- –¢–µ–∫—Å—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏
- –ü–µ—Ä–µ–≤–æ–¥—ã
- –õ—é–±—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–º–ø—Ç—ã –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç

‚úÖ **–ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
- YouTube URL (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è)
- –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (–æ–¥–∏–Ω —Ä–∞–∑)
- HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ Ollama (–ª–æ–∫–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π:**
```python
def sanitize_filename(filename):
    # –£–¥–∞–ª—è–µ–º –æ–ø–∞—Å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
    invalid_chars = r'[<>:"/\\|?*\x00-\x1f]'
    return re.sub(invalid_chars, '_', filename)
```

2. **–ò–∑–æ–ª—è—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:**
```python
TEMP_DIR = BASE_DIR / "temp"  # –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –ø–∞–ø–∫–∞
```

3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–ª—é—á–µ–π:**
```python
OPENAI_API_KEY = Field(default="", env="OPENAI_API_KEY")
```

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ |
|----------|-------------|
| –î–ª–∏–Ω–∞ –≤–∏–¥–µ–æ | –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π* |
| –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ | ~5GB –∞—É–¥–∏–æ |
| –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å | 1 –≤–∏–¥–µ–æ |
| –Ø–∑—ã–∫–∏ | RU/EN |
| LLM –º–æ–¥–µ–ª–∏ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç RAM |
| –ü—Ä–æ–º–ø—Ç –¥–ª–∏–Ω–∞ | 800 —Å–∏–º–≤–æ–ª–æ–≤ |

*–ü—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π RAM –∏ –≤—Ä–µ–º–µ–Ω–∏

### –ü–ª–∞–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (v2.0)

1. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
```python
from multiprocessing import Pool

with Pool(processes=2) as pool:
    pool.map(process_video, urls)
```

2. **Streaming –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
```python
# –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ –º–µ—Ä–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
for chunk in download_stream(url):
    transcribe(chunk)
```

3. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
- Celery –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π
- Redis –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- Docker –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–µ –º–æ–¥–µ–ª–µ–π
- Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è LLM
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ test_utils.py         # Unit —Ç–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îú‚îÄ‚îÄ test_transcriber.py   # Unit —Ç–µ—Å—Ç—ã —Ç—Ä–∞–Ω—Å–∫—Ä–∞–π–±–µ—Ä–∞
‚îú‚îÄ‚îÄ test_translator.py    # Unit —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞
‚îú‚îÄ‚îÄ test_text_refiner.py  # Unit —Ç–µ—Å—Ç—ã —É–ª—É—á—à–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
‚îî‚îÄ‚îÄ test_integration.py   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **Unit —Ç–µ—Å—Ç—ã:** –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
2. **Integration —Ç–µ—Å—Ç—ã:** –ü–æ–ª–Ω—ã–π pipeline (skip –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
3. **Mocking:** –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```python
@pytest.mark.integration
@pytest.mark.skip(reason="Requires test audio")
def test_full_pipeline():
    # –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
    pass
```

---

## üê≥ Docker –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Dockerfile —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```dockerfile
FROM python:3.11-slim

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN apt-get update && apt-get install -y ffmpeg

# Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY requirements.txt .
RUN pip install -r requirements.txt

# –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
COPY src/ ./src/

# Volumes –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
VOLUME ["/app/output", "/app/models"]
```

### Docker-compose –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

```yaml
services:
  transcriber:
    build: .
    volumes:
      - ./output:/app/output  # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
      - ./models:/app/models  # –ö–µ—à –º–æ–¥–µ–ª–µ–π
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –û–¥–∏–Ω–∞–∫–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö –û–°
- –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä—É–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è

1. **–ù–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü –æ–ø–µ—Ä–∞—Ü–∏–π:**
```python
logger.info("–ù–∞—á–∞–ª–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–∏—è")
logger.info("–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ –∑–∞ X –º–∏–Ω")
```

2. **–ü—Ä–æ–≥—Ä–µ—Å—Å:**
```python
tqdm(total=100, desc="–û–±—Ä–∞–±–æ—Ç–∫–∞")
```

3. **–û—à–∏–±–∫–∏:**
```python
logger.error(f"–û—à–∏–±–∫–∞: {e}", exc_info=True)
```

### –ë—É–¥—É—â–µ–µ: Prometheus –º–µ—Ç—Ä–∏–∫–∏ (v2.0)

```python
# –ü—Ä–∏–º–µ—Ä –º–µ—Ç—Ä–∏–∫
videos_processed_total = Counter(...)
processing_duration_seconds = Histogram(...)
model_memory_usage = Gauge(...)
```

---

## üîÑ CI/CD (–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

### GitHub Actions workflow

```yaml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install dependencies
        run: pip install -r requirements-dev.txt
      - name: Run tests
        run: pytest tests/
      - name: Check code style
        run: black --check src/
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç **—Ç–µ–∫—É—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (MVP v1.0)**.

–î–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π —Å–º.:
- [Roadmap –≤ README](README.md#roadmap)
- [GitHub Issues](https://github.com/yourusername/youtube-transcriber/issues)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –Ø–Ω–≤–∞—Ä—å 2025